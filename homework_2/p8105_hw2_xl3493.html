<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<style type="text/css">
@font-face {
font-family: octicons-link;
src: url(data:font/woff;charset=utf-8;base64,d09GRgABAAAAAAZwABAAAAAACFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEU0lHAAAGaAAAAAgAAAAIAAAAAUdTVUIAAAZcAAAACgAAAAoAAQAAT1MvMgAAAyQAAABJAAAAYFYEU3RjbWFwAAADcAAAAEUAAACAAJThvmN2dCAAAATkAAAABAAAAAQAAAAAZnBnbQAAA7gAAACyAAABCUM+8IhnYXNwAAAGTAAAABAAAAAQABoAI2dseWYAAAFsAAABPAAAAZwcEq9taGVhZAAAAsgAAAA0AAAANgh4a91oaGVhAAADCAAAABoAAAAkCA8DRGhtdHgAAAL8AAAADAAAAAwGAACfbG9jYQAAAsAAAAAIAAAACABiATBtYXhwAAACqAAAABgAAAAgAA8ASm5hbWUAAAToAAABQgAAAlXu73sOcG9zdAAABiwAAAAeAAAAME3QpOBwcmVwAAAEbAAAAHYAAAB/aFGpk3jaTY6xa8JAGMW/O62BDi0tJLYQincXEypYIiGJjSgHniQ6umTsUEyLm5BV6NDBP8Tpts6F0v+k/0an2i+itHDw3v2+9+DBKTzsJNnWJNTgHEy4BgG3EMI9DCEDOGEXzDADU5hBKMIgNPZqoD3SilVaXZCER3/I7AtxEJLtzzuZfI+VVkprxTlXShWKb3TBecG11rwoNlmmn1P2WYcJczl32etSpKnziC7lQyWe1smVPy/Lt7Kc+0vWY/gAgIIEqAN9we0pwKXreiMasxvabDQMM4riO+qxM2ogwDGOZTXxwxDiycQIcoYFBLj5K3EIaSctAq2kTYiw+ymhce7vwM9jSqO8JyVd5RH9gyTt2+J/yUmYlIR0s04n6+7Vm1ozezUeLEaUjhaDSuXHwVRgvLJn1tQ7xiuVv/ocTRF42mNgZGBgYGbwZOBiAAFGJBIMAAizAFoAAABiAGIAznjaY2BkYGAA4in8zwXi+W2+MjCzMIDApSwvXzC97Z4Ig8N/BxYGZgcgl52BCSQKAA3jCV8CAABfAAAAAAQAAEB42mNgZGBg4f3vACQZQABIMjKgAmYAKEgBXgAAeNpjYGY6wTiBgZWBg2kmUxoDA4MPhGZMYzBi1AHygVLYQUCaawqDA4PChxhmh/8ODDEsvAwHgMKMIDnGL0x7gJQCAwMAJd4MFwAAAHjaY2BgYGaA4DAGRgYQkAHyGMF8NgYrIM3JIAGVYYDT+AEjAwuDFpBmA9KMDEwMCh9i/v8H8sH0/4dQc1iAmAkALaUKLgAAAHjaTY9LDsIgEIbtgqHUPpDi3gPoBVyRTmTddOmqTXThEXqrob2gQ1FjwpDvfwCBdmdXC5AVKFu3e5MfNFJ29KTQT48Ob9/lqYwOGZxeUelN2U2R6+cArgtCJpauW7UQBqnFkUsjAY/kOU1cP+DAgvxwn1chZDwUbd6CFimGXwzwF6tPbFIcjEl+vvmM/byA48e6tWrKArm4ZJlCbdsrxksL1AwWn/yBSJKpYbq8AXaaTb8AAHja28jAwOC00ZrBeQNDQOWO//sdBBgYGRiYWYAEELEwMTE4uzo5Zzo5b2BxdnFOcALxNjA6b2ByTswC8jYwg0VlNuoCTWAMqNzMzsoK1rEhNqByEyerg5PMJlYuVueETKcd/89uBpnpvIEVomeHLoMsAAe1Id4AAAAAAAB42oWQT07CQBTGv0JBhagk7HQzKxca2sJCE1hDt4QF+9JOS0nbaaYDCQfwCJ7Au3AHj+LO13FMmm6cl7785vven0kBjHCBhfpYuNa5Ph1c0e2Xu3jEvWG7UdPDLZ4N92nOm+EBXuAbHmIMSRMs+4aUEd4Nd3CHD8NdvOLTsA2GL8M9PODbcL+hD7C1xoaHeLJSEao0FEW14ckxC+TU8TxvsY6X0eLPmRhry2WVioLpkrbp84LLQPGI7c6sOiUzpWIWS5GzlSgUzzLBSikOPFTOXqly7rqx0Z1Q5BAIoZBSFihQYQOOBEdkCOgXTOHA07HAGjGWiIjaPZNW13/+lm6S9FT7rLHFJ6fQbkATOG1j2OFMucKJJsxIVfQORl+9Jyda6Sl1dUYhSCm1dyClfoeDve4qMYdLEbfqHf3O/AdDumsjAAB42mNgYoAAZQYjBmyAGYQZmdhL8zLdDEydARfoAqIAAAABAAMABwAKABMAB///AA8AAQAAAAAAAAAAAAAAAAABAAAAAA==) format('woff');
}
body {
-webkit-text-size-adjust: 100%;
text-size-adjust: 100%;
color: #333;
font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
font-size: 16px;
line-height: 1.6;
word-wrap: break-word;
}
a {
background-color: transparent;
}
a:active,
a:hover {
outline: 0;
}
strong {
font-weight: bold;
}
h1 {
font-size: 2em;
margin: 0.67em 0;
}
img {
border: 0;
}
hr {
box-sizing: content-box;
height: 0;
}
pre {
overflow: auto;
}
code,
kbd,
pre {
font-family: monospace, monospace;
font-size: 1em;
}
input {
color: inherit;
font: inherit;
margin: 0;
}
html input[disabled] {
cursor: default;
}
input {
line-height: normal;
}
input[type="checkbox"] {
box-sizing: border-box;
padding: 0;
}
table {
border-collapse: collapse;
border-spacing: 0;
}
td,
th {
padding: 0;
}
* {
box-sizing: border-box;
}
input {
font: 13px / 1.4 Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}
a {
color: #4078c0;
text-decoration: none;
}
a:hover,
a:active {
text-decoration: underline;
}
hr {
height: 0;
margin: 15px 0;
overflow: hidden;
background: transparent;
border: 0;
border-bottom: 1px solid #ddd;
}
hr:before {
display: table;
content: "";
}
hr:after {
display: table;
clear: both;
content: "";
}
h1,
h2,
h3,
h4,
h5,
h6 {
margin-top: 15px;
margin-bottom: 15px;
line-height: 1.1;
}
h1 {
font-size: 30px;
}
h2 {
font-size: 21px;
}
h3 {
font-size: 16px;
}
h4 {
font-size: 14px;
}
h5 {
font-size: 12px;
}
h6 {
font-size: 11px;
}
blockquote {
margin: 0;
}
ul,
ol {
padding: 0;
margin-top: 0;
margin-bottom: 0;
}
ol ol,
ul ol {
list-style-type: lower-roman;
}
ul ul ol,
ul ol ol,
ol ul ol,
ol ol ol {
list-style-type: lower-alpha;
}
dd {
margin-left: 0;
}
code {
font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
font-size: 12px;
}
pre {
margin-top: 0;
margin-bottom: 0;
font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace;
}
.select::-ms-expand {
opacity: 0;
}
.octicon {
font: normal normal normal 16px/1 octicons-link;
display: inline-block;
text-decoration: none;
text-rendering: auto;
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
}
.octicon-link:before {
content: '\f05c';
}
.markdown-body:before {
display: table;
content: "";
}
.markdown-body:after {
display: table;
clear: both;
content: "";
}
.markdown-body>*:first-child {
margin-top: 0 !important;
}
.markdown-body>*:last-child {
margin-bottom: 0 !important;
}
a:not([href]) {
color: inherit;
text-decoration: none;
}
.anchor {
display: inline-block;
padding-right: 2px;
margin-left: -18px;
}
.anchor:focus {
outline: none;
}
h1,
h2,
h3,
h4,
h5,
h6 {
margin-top: 1em;
margin-bottom: 16px;
font-weight: bold;
line-height: 1.4;
}
h1 .octicon-link,
h2 .octicon-link,
h3 .octicon-link,
h4 .octicon-link,
h5 .octicon-link,
h6 .octicon-link {
color: #000;
vertical-align: middle;
visibility: hidden;
}
h1:hover .anchor,
h2:hover .anchor,
h3:hover .anchor,
h4:hover .anchor,
h5:hover .anchor,
h6:hover .anchor {
text-decoration: none;
}
h1:hover .anchor .octicon-link,
h2:hover .anchor .octicon-link,
h3:hover .anchor .octicon-link,
h4:hover .anchor .octicon-link,
h5:hover .anchor .octicon-link,
h6:hover .anchor .octicon-link {
visibility: visible;
}
h1 {
padding-bottom: 0.3em;
font-size: 2.25em;
line-height: 1.2;
border-bottom: 1px solid #eee;
}
h1 .anchor {
line-height: 1;
}
h2 {
padding-bottom: 0.3em;
font-size: 1.75em;
line-height: 1.225;
border-bottom: 1px solid #eee;
}
h2 .anchor {
line-height: 1;
}
h3 {
font-size: 1.5em;
line-height: 1.43;
}
h3 .anchor {
line-height: 1.2;
}
h4 {
font-size: 1.25em;
}
h4 .anchor {
line-height: 1.2;
}
h5 {
font-size: 1em;
}
h5 .anchor {
line-height: 1.1;
}
h6 {
font-size: 1em;
color: #777;
}
h6 .anchor {
line-height: 1.1;
}
p,
blockquote,
ul,
ol,
dl,
table,
pre {
margin-top: 0;
margin-bottom: 16px;
}
hr {
height: 4px;
padding: 0;
margin: 16px 0;
background-color: #e7e7e7;
border: 0 none;
}
ul,
ol {
padding-left: 2em;
}
ul ul,
ul ol,
ol ol,
ol ul {
margin-top: 0;
margin-bottom: 0;
}
li>p {
margin-top: 16px;
}
dl {
padding: 0;
}
dl dt {
padding: 0;
margin-top: 16px;
font-size: 1em;
font-style: italic;
font-weight: bold;
}
dl dd {
padding: 0 16px;
margin-bottom: 16px;
}
blockquote {
padding: 0 15px;
color: #777;
border-left: 4px solid #ddd;
}
blockquote>:first-child {
margin-top: 0;
}
blockquote>:last-child {
margin-bottom: 0;
}
table {
display: block;
width: 100%;
overflow: auto;
word-break: normal;
word-break: keep-all;
}
table th {
font-weight: bold;
}
table th,
table td {
padding: 6px 13px;
border: 1px solid #ddd;
}
table tr {
background-color: #fff;
border-top: 1px solid #ccc;
}
table tr:nth-child(2n) {
background-color: #f8f8f8;
}
img {
max-width: 100%;
box-sizing: content-box;
background-color: #fff;
}
code {
padding: 0;
padding-top: 0.2em;
padding-bottom: 0.2em;
margin: 0;
font-size: 85%;
background-color: rgba(0,0,0,0.04);
border-radius: 3px;
}
code:before,
code:after {
letter-spacing: -0.2em;
content: "\00a0";
}
pre>code {
padding: 0;
margin: 0;
font-size: 100%;
word-break: normal;
white-space: pre;
background: transparent;
border: 0;
}
.highlight {
margin-bottom: 16px;
}
.highlight pre,
pre {
padding: 16px;
overflow: auto;
font-size: 85%;
line-height: 1.45;
background-color: #f7f7f7;
border-radius: 3px;
}
.highlight pre {
margin-bottom: 0;
word-break: normal;
}
pre {
word-wrap: normal;
}
pre code {
display: inline;
max-width: initial;
padding: 0;
margin: 0;
overflow: initial;
line-height: inherit;
word-wrap: normal;
background-color: transparent;
border: 0;
}
pre code:before,
pre code:after {
content: normal;
}
kbd {
display: inline-block;
padding: 3px 5px;
font-size: 11px;
line-height: 10px;
color: #555;
vertical-align: middle;
background-color: #fcfcfc;
border: solid 1px #ccc;
border-bottom-color: #bbb;
border-radius: 3px;
box-shadow: inset 0 -1px 0 #bbb;
}
.pl-c {
color: #969896;
}
.pl-c1,
.pl-s .pl-v {
color: #0086b3;
}
.pl-e,
.pl-en {
color: #795da3;
}
.pl-s .pl-s1,
.pl-smi {
color: #333;
}
.pl-ent {
color: #63a35c;
}
.pl-k {
color: #a71d5d;
}
.pl-pds,
.pl-s,
.pl-s .pl-pse .pl-s1,
.pl-sr,
.pl-sr .pl-cce,
.pl-sr .pl-sra,
.pl-sr .pl-sre {
color: #183691;
}
.pl-v {
color: #ed6a43;
}
.pl-id {
color: #b52a1d;
}
.pl-ii {
background-color: #b52a1d;
color: #f8f8f8;
}
.pl-sr .pl-cce {
color: #63a35c;
font-weight: bold;
}
.pl-ml {
color: #693a17;
}
.pl-mh,
.pl-mh .pl-en,
.pl-ms {
color: #1d3e81;
font-weight: bold;
}
.pl-mq {
color: #008080;
}
.pl-mi {
color: #333;
font-style: italic;
}
.pl-mb {
color: #333;
font-weight: bold;
}
.pl-md {
background-color: #ffecec;
color: #bd2c00;
}
.pl-mi1 {
background-color: #eaffea;
color: #55a532;
}
.pl-mdr {
color: #795da3;
font-weight: bold;
}
.pl-mo {
color: #1d3e81;
}
kbd {
display: inline-block;
padding: 3px 5px;
font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
line-height: 10px;
color: #555;
vertical-align: middle;
background-color: #fcfcfc;
border: solid 1px #ccc;
border-bottom-color: #bbb;
border-radius: 3px;
box-shadow: inset 0 -1px 0 #bbb;
}
.task-list-item {
list-style-type: none;
}
.task-list-item+.task-list-item {
margin-top: 3px;
}
.task-list-item input {
margin: 0 0.35em 0.25em -1.6em;
vertical-align: middle;
}
:checked+.radio-label {
z-index: 1;
position: relative;
border-color: #4078c0;
}
.sourceLine {
display: inline-block;
}
code .kw { color: #000000; }
code .dt { color: #ed6a43; }
code .dv { color: #009999; }
code .bn { color: #009999; }
code .fl { color: #009999; }
code .ch { color: #009999; }
code .st { color: #183691; }
code .co { color: #969896; }
code .ot { color: #0086b3; }
code .al { color: #a61717; }
code .fu { color: #63a35c; }
code .er { color: #a61717; background-color: #e3d2d2; }
code .wa { color: #000000; }
code .cn { color: #008080; }
code .sc { color: #008080; }
code .vs { color: #183691; }
code .ss { color: #183691; }
code .im { color: #000000; }
code .va {color: #008080; }
code .cf { color: #000000; }
code .op { color: #000000; }
code .bu { color: #000000; }
code .ex { color: #000000; }
code .pp { color: #999999; }
code .at { color: #008080; }
code .do { color: #969896; }
code .an { color: #008080; }
code .cv { color: #008080; }
code .in { color: #008080; }
</style>
<style>
body {
box-sizing: border-box;
min-width: 200px;
max-width: 980px;
margin: 0 auto;
padding: 45px;
padding-top: 0px;
}
</style>


</head>

<body>

<h1 id="homework-2">Homework 2</h1>
<p>Xuange Liang (xl3493) 2025-10-12</p>
<h2 id="problem-1">Problem 1</h2>
<p>This problem uses the FiveThirtyEight data to analyze political and
economic trends. We’ll work with three datasets:
<code>pols-month.csv</code>, <code>unemployment.csv</code>, and
<code>snp.csv</code>.</p>
<h3 id="loading-required-libraries">Loading required libraries</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<h3 id="cleaning-the-pols-month-dataset">Cleaning the pols-month
dataset</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>pols_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/fivethirtyeight_datasets/pols-month.csv&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>  <span class="fu">separate</span>(mon, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>, <span class="at">convert =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>    <span class="at">month =</span> month.name[month],</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>    <span class="at">president =</span> <span class="fu">case_when</span>(</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>      prez_gop <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;gop&quot;</span>,</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>      prez_dem <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;dem&quot;</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>    )</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>prez_dem, <span class="sc">-</span>prez_gop, <span class="sc">-</span>day)</span></code></pre></div>
<pre><code>## Rows: 822 Columns: 9
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
## date (1): mon
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>pols_df</span></code></pre></div>
<pre><code>## # A tibble: 822 × 9
##     year month     gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president
##    &lt;int&gt; &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;    
##  1  1947 January        23      51     253      23      45     198 dem      
##  2  1947 February       23      51     253      23      45     198 dem      
##  3  1947 March          23      51     253      23      45     198 dem      
##  4  1947 April          23      51     253      23      45     198 dem      
##  5  1947 May            23      51     253      23      45     198 dem      
##  6  1947 June           23      51     253      23      45     198 dem      
##  7  1947 July           23      51     253      23      45     198 dem      
##  8  1947 August         23      51     253      23      45     198 dem      
##  9  1947 September      23      51     253      23      45     198 dem      
## 10  1947 October        23      51     253      23      45     198 dem      
## # ℹ 812 more rows</code></pre>
<h3 id="cleaning-the-snp-dataset">Cleaning the snp dataset</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>snp_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/fivethirtyeight_datasets/snp.csv&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>  <span class="fu">separate</span>(date, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>, <span class="st">&quot;year&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>, <span class="at">convert =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">if_else</span>(year <span class="sc">&gt;=</span> <span class="dv">50</span>, <span class="dv">1900</span> <span class="sc">+</span> year, <span class="dv">2000</span> <span class="sc">+</span> year),</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>    <span class="at">month =</span> month.name[month]</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>  <span class="fu">select</span>(year, month, close) <span class="sc">%&gt;%</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>  <span class="fu">arrange</span>(year, month)</span></code></pre></div>
<pre><code>## Rows: 787 Columns: 2
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (1): date
## dbl (1): close
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>snp_df</span></code></pre></div>
<pre><code>## # A tibble: 787 × 3
##     year month    close
##    &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;
##  1  1950 April     18.0
##  2  1950 August    18.4
##  3  1950 December  20.4
##  4  1950 February  17.2
##  5  1950 January   17.0
##  6  1950 July      17.8
##  7  1950 June      17.7
##  8  1950 March     17.3
##  9  1950 May       18.8
## 10  1950 November  19.5
## # ℹ 777 more rows</code></pre>
<h3 id="cleaning-the-unemployment-dataset">Cleaning the unemployment
dataset</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>unemployment_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/fivethirtyeight_datasets/unemployment.csv&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>    <span class="at">cols =</span> Jan<span class="sc">:</span>Dec,</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">&quot;month&quot;</span>,</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">&quot;unemployment&quot;</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>    <span class="at">month =</span> <span class="fu">match</span>(month, month.abb),</span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>    <span class="at">month =</span> month.name[month]</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">year =</span> Year)</span></code></pre></div>
<pre><code>## Rows: 68 Columns: 13
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>unemployment_df</span></code></pre></div>
<pre><code>## # A tibble: 816 × 3
##     year month     unemployment
##    &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;
##  1  1948 January            3.4
##  2  1948 February           3.8
##  3  1948 March              4  
##  4  1948 April              3.9
##  5  1948 May                3.5
##  6  1948 June               3.6
##  7  1948 July               3.6
##  8  1948 August             3.9
##  9  1948 September          3.8
## 10  1948 October            3.7
## # ℹ 806 more rows</code></pre>
<h3 id="merging-the-datasets">Merging the datasets</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>final_df <span class="ot">&lt;-</span> pols_df <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>  <span class="fu">left_join</span>(snp_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>  <span class="fu">left_join</span>(unemployment_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>))</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>final_df</span></code></pre></div>
<pre><code>## # A tibble: 822 × 11
##     year month   gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president close
##    &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;
##  1  1947 January      23      51     253      23      45     198 dem          NA
##  2  1947 Februa…      23      51     253      23      45     198 dem          NA
##  3  1947 March        23      51     253      23      45     198 dem          NA
##  4  1947 April        23      51     253      23      45     198 dem          NA
##  5  1947 May          23      51     253      23      45     198 dem          NA
##  6  1947 June         23      51     253      23      45     198 dem          NA
##  7  1947 July         23      51     253      23      45     198 dem          NA
##  8  1947 August       23      51     253      23      45     198 dem          NA
##  9  1947 Septem…      23      51     253      23      45     198 dem          NA
## 10  1947 October      23      51     253      23      45     198 dem          NA
## # ℹ 812 more rows
## # ℹ 1 more variable: unemployment &lt;dbl&gt;</code></pre>
<h3 id="description-of-the-datasets">Description of the datasets</h3>
<p>The <strong>pols-month dataset</strong> contained information about
the number of national politicians who are democratic or republican at
any given time. It included variables for the number of governors,
senators, and representatives from each party, as well as whether the
president was democratic or republican. After cleaning, the dataset has
822 observations.</p>
<p>The <strong>snp dataset</strong> contained information related to
Standard &amp; Poor’s stock market index (S&amp;P), which is often used
as a representative measure of stock market as a whole. The
<code>close</code> variable represents the closing values of the S&amp;P
stock index on the associated date. After cleaning, the dataset has 787
observations.</p>
<p>The <strong>unemployment dataset</strong> contained monthly
unemployment percentages from January 1948 to June 2015. After tidying
from wide to long format, the dataset has 816 observations.</p>
<p>The <strong>final merged dataset</strong> combines all three datasets
and contains 822 observations and 11 variables. The dataset spans from
1947 to 2015. Key variables include:</p>
<ul>
<li><code>year</code> and <code>month</code>: Time identifiers</li>
<li><code>president</code>: Whether the president was democratic (“dem”)
or republican (“gop”)</li>
<li><code>gov_gop</code>, <code>sen_gop</code>, <code>rep_gop</code>:
Number of republican governors, senators, and representatives</li>
<li><code>gov_dem</code>, <code>sen_dem</code>, <code>rep_dem</code>:
Number of democratic governors, senators, and representatives</li>
<li><code>close</code>: Closing values of the S&amp;P stock index</li>
<li><code>unemployment</code>: Unemployment percentage</li>
</ul>
<h2 id="problem-2">Problem 2</h2>
<p>This problem uses the Mr. Trash Wheel dataset to analyze trash
collection from water wheels in Baltimore’s Inner Harbor.</p>
<h3 id="loading-required-libraries-1">Loading required libraries</h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">library</span>(readxl)</span></code></pre></div>
<h3 id="reading-and-cleaning-mr-trash-wheel-data">Reading and cleaning
Mr. Trash Wheel data</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>mr_trash_wheel <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data/202509 Trash Wheel Collection Data.xlsx&quot;</span>,</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>                              <span class="at">sheet =</span> <span class="st">&quot;Mr. Trash Wheel&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(dumpster)) <span class="sc">%&gt;%</span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>    <span class="at">sports_balls =</span> <span class="fu">as.integer</span>(<span class="fu">round</span>(sports_balls)),</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>    <span class="at">trash_wheel =</span> <span class="st">&quot;Mr. Trash Wheel&quot;</span>,</span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">as.numeric</span>(year)</span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## New names:
## • `` -&gt; `...15`
## • `` -&gt; `...16`</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>mr_trash_wheel</span></code></pre></div>
<pre><code>## # A tibble: 707 × 17
##    dumpster month  year date                weight_tons volume_cubic_yards
##       &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dttm&gt;                    &lt;dbl&gt;              &lt;dbl&gt;
##  1        1 May    2014 2014-05-16 00:00:00        4.31                 18
##  2        2 May    2014 2014-05-16 00:00:00        2.74                 13
##  3        3 May    2014 2014-05-16 00:00:00        3.45                 15
##  4        4 May    2014 2014-05-17 00:00:00        3.1                  15
##  5        5 May    2014 2014-05-17 00:00:00        4.06                 18
##  6        6 May    2014 2014-05-20 00:00:00        2.71                 13
##  7        7 May    2014 2014-05-21 00:00:00        1.91                  8
##  8        8 May    2014 2014-05-28 00:00:00        3.7                  16
##  9        9 June   2014 2014-06-05 00:00:00        2.52                 14
## 10       10 June   2014 2014-06-11 00:00:00        3.76                 18
## # ℹ 697 more rows
## # ℹ 11 more variables: plastic_bottles &lt;dbl&gt;, polystyrene &lt;dbl&gt;,
## #   cigarette_butts &lt;dbl&gt;, glass_bottles &lt;dbl&gt;, plastic_bags &lt;dbl&gt;,
## #   wrappers &lt;dbl&gt;, sports_balls &lt;int&gt;, homes_powered &lt;dbl&gt;, x15 &lt;lgl&gt;,
## #   x16 &lt;lgl&gt;, trash_wheel &lt;chr&gt;</code></pre>
<h3 id="reading-and-cleaning-professor-trash-wheel-data">Reading and
cleaning Professor Trash Wheel data</h3>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>professor_trash_wheel <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data/202509 Trash Wheel Collection Data.xlsx&quot;</span>,</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>                                     <span class="at">sheet =</span> <span class="st">&quot;Professor Trash Wheel&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">%&gt;%</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(dumpster)) <span class="sc">%&gt;%</span></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a>    <span class="at">trash_wheel =</span> <span class="st">&quot;Professor Trash Wheel&quot;</span>,</span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">as.numeric</span>(year)</span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a>  )</span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a>professor_trash_wheel</span></code></pre></div>
<pre><code>## # A tibble: 132 × 14
##    dumpster month     year date                weight_tons volume_cubic_yards
##       &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dttm&gt;                    &lt;dbl&gt;              &lt;dbl&gt;
##  1        1 January   2017 2017-01-02 00:00:00        1.79                 15
##  2        2 January   2017 2017-01-30 00:00:00        1.58                 15
##  3        3 February  2017 2017-02-26 00:00:00        2.32                 18
##  4        4 February  2017 2017-02-26 00:00:00        3.72                 15
##  5        5 February  2017 2017-02-28 00:00:00        1.45                 15
##  6        6 March     2017 2017-03-30 00:00:00        1.71                 15
##  7        7 April     2017 2017-04-01 00:00:00        1.82                 15
##  8        8 April     2017 2017-04-20 00:00:00        2.37                 15
##  9        9 May       2017 2017-05-10 00:00:00        2.64                 15
## 10       10 May       2017 2017-05-26 00:00:00        2.78                 15
## # ℹ 122 more rows
## # ℹ 8 more variables: plastic_bottles &lt;dbl&gt;, polystyrene &lt;dbl&gt;,
## #   cigarette_butts &lt;dbl&gt;, glass_bottles &lt;dbl&gt;, plastic_bags &lt;dbl&gt;,
## #   wrappers &lt;dbl&gt;, homes_powered &lt;dbl&gt;, trash_wheel &lt;chr&gt;</code></pre>
<h3 id="reading-and-cleaning-gwynnda-data">Reading and cleaning Gwynnda
data</h3>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>gwynnda_trash_wheel <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data/202509 Trash Wheel Collection Data.xlsx&quot;</span>,</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>                                   <span class="at">sheet =</span> <span class="st">&quot;Gwynns Falls Trash Wheel&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(dumpster)) <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a>    <span class="at">trash_wheel =</span> <span class="st">&quot;Gwynnda&quot;</span>,</span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">as.numeric</span>(year)</span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a>  )</span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a>gwynnda_trash_wheel</span></code></pre></div>
<pre><code>## # A tibble: 349 × 13
##    dumpster month   year date                weight_tons volume_cubic_yards
##       &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dttm&gt;                    &lt;dbl&gt;              &lt;dbl&gt;
##  1        1 July    2021 2021-07-03 00:00:00        0.93                 15
##  2        2 July    2021 2021-07-07 00:00:00        2.26                 15
##  3        3 July    2021 2021-07-07 00:00:00        1.62                 15
##  4        4 July    2021 2021-07-16 00:00:00        1.76                 15
##  5        5 July    2021 2021-07-30 00:00:00        1.53                 15
##  6        6 August  2021 2021-08-11 00:00:00        2.06                 15
##  7        7 August  2021 2021-08-14 00:00:00        1.9                  15
##  8        8 August  2021 2021-08-16 00:00:00        2.16                 15
##  9        9 August  2021 2021-08-16 00:00:00        2.6                  15
## 10       10 August  2021 2021-08-17 00:00:00        3.21                 15
## # ℹ 339 more rows
## # ℹ 7 more variables: plastic_bottles &lt;dbl&gt;, polystyrene &lt;dbl&gt;,
## #   cigarette_butts &lt;dbl&gt;, plastic_bags &lt;dbl&gt;, wrappers &lt;dbl&gt;,
## #   homes_powered &lt;dbl&gt;, trash_wheel &lt;chr&gt;</code></pre>
<h3 id="combining-all-trash-wheel-datasets">Combining all Trash Wheel
datasets</h3>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>trash_wheel_combined <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(mr_trash_wheel, professor_trash_wheel, gwynnda_trash_wheel)</span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a>trash_wheel_combined</span></code></pre></div>
<pre><code>## # A tibble: 1,188 × 17
##    dumpster month  year date                weight_tons volume_cubic_yards
##       &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dttm&gt;                    &lt;dbl&gt;              &lt;dbl&gt;
##  1        1 May    2014 2014-05-16 00:00:00        4.31                 18
##  2        2 May    2014 2014-05-16 00:00:00        2.74                 13
##  3        3 May    2014 2014-05-16 00:00:00        3.45                 15
##  4        4 May    2014 2014-05-17 00:00:00        3.1                  15
##  5        5 May    2014 2014-05-17 00:00:00        4.06                 18
##  6        6 May    2014 2014-05-20 00:00:00        2.71                 13
##  7        7 May    2014 2014-05-21 00:00:00        1.91                  8
##  8        8 May    2014 2014-05-28 00:00:00        3.7                  16
##  9        9 June   2014 2014-06-05 00:00:00        2.52                 14
## 10       10 June   2014 2014-06-11 00:00:00        3.76                 18
## # ℹ 1,178 more rows
## # ℹ 11 more variables: plastic_bottles &lt;dbl&gt;, polystyrene &lt;dbl&gt;,
## #   cigarette_butts &lt;dbl&gt;, glass_bottles &lt;dbl&gt;, plastic_bags &lt;dbl&gt;,
## #   wrappers &lt;dbl&gt;, sports_balls &lt;int&gt;, homes_powered &lt;dbl&gt;, x15 &lt;lgl&gt;,
## #   x16 &lt;lgl&gt;, trash_wheel &lt;chr&gt;</code></pre>
<h3 id="calculating-key-statistics">Calculating key statistics</h3>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="co"># Total weight collected by Professor Trash Wheel</span></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a>professor_total_weight <span class="ot">&lt;-</span> trash_wheel_combined <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a>  <span class="fu">filter</span>(trash_wheel <span class="sc">==</span> <span class="st">&quot;Professor Trash Wheel&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a>  <span class="fu">pull</span>(weight_tons) <span class="sc">%&gt;%</span></span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a>  <span class="fu">sum</span>(<span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a></span>
<span id="cb27-7"><a href="#cb27-7" tabindex="-1"></a><span class="co"># Total cigarette butts collected by Gwynnda in June 2022</span></span>
<span id="cb27-8"><a href="#cb27-8" tabindex="-1"></a>gwynnda_june_2022_cigs <span class="ot">&lt;-</span> trash_wheel_combined <span class="sc">%&gt;%</span></span>
<span id="cb27-9"><a href="#cb27-9" tabindex="-1"></a>  <span class="fu">filter</span>(trash_wheel <span class="sc">==</span> <span class="st">&quot;Gwynnda&quot;</span>, </span>
<span id="cb27-10"><a href="#cb27-10" tabindex="-1"></a>         month <span class="sc">==</span> <span class="st">&quot;June&quot;</span>, </span>
<span id="cb27-11"><a href="#cb27-11" tabindex="-1"></a>         year <span class="sc">==</span> <span class="dv">2022</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-12"><a href="#cb27-12" tabindex="-1"></a>  <span class="fu">pull</span>(cigarette_butts) <span class="sc">%&gt;%</span></span>
<span id="cb27-13"><a href="#cb27-13" tabindex="-1"></a>  <span class="fu">sum</span>(<span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<h3 id="description-of-the-trash-wheel-data">Description of the Trash
Wheel data</h3>
<p>The combined Trash Wheel dataset contains 1188 observations from
three different water wheels: Mr. Trash Wheel, Professor Trash Wheel,
and Gwynnda. The dataset includes 17 variables that track trash
collection efforts.</p>
<p>Key variables include:</p>
<ul>
<li><code>dumpster</code>: Dumpster number</li>
<li><code>date</code>: Date of collection</li>
<li><code>weight_tons</code>: Weight of trash collected in tons</li>
<li><code>volume_cubic_yards</code>: Volume of trash collected</li>
<li><code>plastic_bottles</code>, <code>polystyrene</code>,
<code>cigarette_butts</code>, <code>glass_bottles</code>,
<code>plastic_bags</code>, <code>wrappers</code>,
<code>sports_balls</code>: Counts of specific types of trash</li>
<li><code>homes_powered</code>: Approximate number of homes powered by
the trash incineration</li>
<li><code>trash_wheel</code>: Identifier for which Trash Wheel collected
the data</li>
</ul>
<p>The total weight of trash collected by Professor Trash Wheel was
<strong>282.26 tons</strong>. The total number of cigarette butts
collected by Gwynnda in June of 2022 was <strong>18,120</strong>.</p>
<h2 id="problem-3">Problem 3</h2>
<p>This problem analyzes rental price trends in New York City using the
Zillow Observed Rent Index (ZORI) data.</p>
<h3 id="importing-and-cleaning-zip-code-data">Importing and cleaning ZIP
code data</h3>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>nyc_zipcodes <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/zillow_data/Zip Codes.csv&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">borough =</span> county) <span class="sc">%&gt;%</span></span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">zip =</span> zip_code, borough, neighborhood)</span></code></pre></div>
<pre><code>## Rows: 322 Columns: 7
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (4): County, County Code, File Date, Neighborhood
## dbl (3): State FIPS, County FIPS, ZipCode
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a>nyc_zipcodes</span></code></pre></div>
<pre><code>## # A tibble: 322 × 3
##      zip borough neighborhood              
##    &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;                     
##  1 10451 Bronx   High Bridge and Morrisania
##  2 10452 Bronx   High Bridge and Morrisania
##  3 10453 Bronx   Central Bronx             
##  4 10454 Bronx   Hunts Point and Mott Haven
##  5 10455 Bronx   Hunts Point and Mott Haven
##  6 10456 Bronx   High Bridge and Morrisania
##  7 10457 Bronx   Central Bronx             
##  8 10458 Bronx   Bronx Park and Fordham    
##  9 10459 Bronx   Hunts Point and Mott Haven
## 10 10460 Bronx   Central Bronx             
## # ℹ 312 more rows</code></pre>
<h3 id="importing-and-cleaning-rental-price-data">Importing and cleaning
rental price data</h3>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a>rental_prices <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/zillow_data/Zip_zori_uc_sfrcondomfr_sm_month_NYC.csv&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">%&gt;%</span></span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a>  <span class="fu">select</span>(region_name, <span class="fu">starts_with</span>(<span class="st">&quot;x&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">zip =</span> region_name) <span class="sc">%&gt;%</span></span>
<span id="cb32-5"><a href="#cb32-5" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb32-6"><a href="#cb32-6" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">&quot;x&quot;</span>),</span>
<span id="cb32-7"><a href="#cb32-7" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">&quot;date&quot;</span>,</span>
<span id="cb32-8"><a href="#cb32-8" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">&quot;rental_price&quot;</span>,</span>
<span id="cb32-9"><a href="#cb32-9" tabindex="-1"></a>    <span class="at">names_prefix =</span> <span class="st">&quot;x&quot;</span></span>
<span id="cb32-10"><a href="#cb32-10" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb32-11"><a href="#cb32-11" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb32-12"><a href="#cb32-12" tabindex="-1"></a>    <span class="at">date =</span> <span class="fu">as.Date</span>(date, <span class="at">format =</span> <span class="st">&quot;%Y_%m_%d&quot;</span>),</span>
<span id="cb32-13"><a href="#cb32-13" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">year</span>(date),</span>
<span id="cb32-14"><a href="#cb32-14" tabindex="-1"></a>    <span class="at">month =</span> <span class="fu">month</span>(date, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>)</span>
<span id="cb32-15"><a href="#cb32-15" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb32-16"><a href="#cb32-16" tabindex="-1"></a>  <span class="fu">filter</span>(date <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">&quot;2015-01-01&quot;</span>), date <span class="sc">&lt;=</span> <span class="fu">as.Date</span>(<span class="st">&quot;2024-08-31&quot;</span>))</span></code></pre></div>
<pre><code>## Rows: 149 Columns: 125
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr   (6): RegionType, StateName, State, City, Metro, CountyName
## dbl (119): RegionID, SizeRank, RegionName, 2015-01-31, 2015-02-28, 2015-03-3...
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a>rental_prices</span></code></pre></div>
<pre><code>## # A tibble: 17,284 × 5
##      zip date       rental_price  year month    
##    &lt;dbl&gt; &lt;date&gt;            &lt;dbl&gt; &lt;dbl&gt; &lt;ord&gt;    
##  1 11368 2015-01-31           NA  2015 January  
##  2 11368 2015-02-28           NA  2015 February 
##  3 11368 2015-03-31           NA  2015 March    
##  4 11368 2015-04-30           NA  2015 April    
##  5 11368 2015-05-31           NA  2015 May      
##  6 11368 2015-06-30           NA  2015 June     
##  7 11368 2015-07-31           NA  2015 July     
##  8 11368 2015-08-31           NA  2015 August   
##  9 11368 2015-09-30           NA  2015 September
## 10 11368 2015-10-31           NA  2015 October  
## # ℹ 17,274 more rows</code></pre>
<h3 id="merging-datasets">Merging datasets</h3>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a>rental_data_combined <span class="ot">&lt;-</span> rental_prices <span class="sc">%&gt;%</span></span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a>  <span class="fu">left_join</span>(nyc_zipcodes, <span class="at">by =</span> <span class="st">&quot;zip&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a>  <span class="fu">select</span>(zip, borough, neighborhood, date, year, month, rental_price) <span class="sc">%&gt;%</span></span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a>  <span class="fu">arrange</span>(zip, date)</span></code></pre></div>
<pre><code>## Warning in left_join(., nyc_zipcodes, by = &quot;zip&quot;): Detected an unexpected many-to-many relationship between `x` and `y`.
## ℹ Row 4757 of `x` matches multiple rows in `y`.
## ℹ Row 256 of `y` matches multiple rows in `x`.
## ℹ If a many-to-many relationship is expected, set `relationship =
##   &quot;many-to-many&quot;` to silence this warning.</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a>rental_data_combined</span></code></pre></div>
<pre><code>## # A tibble: 17,516 × 7
##      zip borough  neighborhood        date        year month     rental_price
##    &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;               &lt;date&gt;     &lt;dbl&gt; &lt;ord&gt;            &lt;dbl&gt;
##  1 10001 New York Chelsea and Clinton 2015-01-31  2015 January          3855.
##  2 10001 New York Chelsea and Clinton 2015-02-28  2015 February         3892.
##  3 10001 New York Chelsea and Clinton 2015-03-31  2015 March            3898.
##  4 10001 New York Chelsea and Clinton 2015-04-30  2015 April            3970.
##  5 10001 New York Chelsea and Clinton 2015-05-31  2015 May              4033.
##  6 10001 New York Chelsea and Clinton 2015-06-30  2015 June             4071.
##  7 10001 New York Chelsea and Clinton 2015-07-31  2015 July             4067.
##  8 10001 New York Chelsea and Clinton 2015-08-31  2015 August           4070.
##  9 10001 New York Chelsea and Clinton 2015-09-30  2015 September        4040.
## 10 10001 New York Chelsea and Clinton 2015-10-31  2015 October          4023.
## # ℹ 17,506 more rows</code></pre>
<h3 id="description-of-the-final-dataset">Description of the final
dataset</h3>
<p>The final tidy dataset contains <strong>17516 observations</strong>
from January 2015 to August 2024. The dataset includes <strong>149
unique ZIP codes</strong> and <strong>43 unique neighborhoods</strong>
across New York City’s five boroughs.</p>
<p>Key variables include:</p>
<ul>
<li><code>zip</code>: ZIP code</li>
<li><code>borough</code>: NYC borough (Manhattan, Brooklyn, Queens,
Bronx, Staten Island)</li>
<li><code>neighborhood</code>: Neighborhood name within the borough</li>
<li><code>date</code>: Date of observation</li>
<li><code>year</code> and <code>month</code>: Time identifiers</li>
<li><code>rental_price</code>: Zillow Observed Rent Index value</li>
</ul>
<h3 id="zip-codes-in-zip-code-dataset-but-not-in-zillow-data">ZIP codes
in ZIP code dataset but not in Zillow data</h3>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a>zipcodes_in_zipfile <span class="ot">&lt;-</span> nyc_zipcodes <span class="sc">%&gt;%</span> <span class="fu">pull</span>(zip)</span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a>zipcodes_in_zillow <span class="ot">&lt;-</span> rental_data_combined <span class="sc">%&gt;%</span> <span class="fu">pull</span>(zip) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" tabindex="-1"></a>missing_zipcodes <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(zipcodes_in_zipfile, zipcodes_in_zillow)</span>
<span id="cb40-5"><a href="#cb40-5" tabindex="-1"></a></span>
<span id="cb40-6"><a href="#cb40-6" tabindex="-1"></a><span class="co"># Get some examples with their neighborhoods</span></span>
<span id="cb40-7"><a href="#cb40-7" tabindex="-1"></a>missing_examples <span class="ot">&lt;-</span> nyc_zipcodes <span class="sc">%&gt;%</span></span>
<span id="cb40-8"><a href="#cb40-8" tabindex="-1"></a>  <span class="fu">filter</span>(zip <span class="sc">%in%</span> missing_zipcodes) <span class="sc">%&gt;%</span></span>
<span id="cb40-9"><a href="#cb40-9" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb40-10"><a href="#cb40-10" tabindex="-1"></a></span>
<span id="cb40-11"><a href="#cb40-11" tabindex="-1"></a>missing_examples</span></code></pre></div>
<pre><code>## # A tibble: 10 × 3
##      zip borough neighborhood              
##    &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;                     
##  1 10464 Bronx   Southeast Bronx           
##  2 10474 Bronx   Hunts Point and Mott Haven
##  3 10475 Bronx   Northeast Bronx           
##  4 10499 Bronx   &lt;NA&gt;                      
##  5 10550 Bronx   &lt;NA&gt;                      
##  6 10704 Bronx   &lt;NA&gt;                      
##  7 10705 Bronx   &lt;NA&gt;                      
##  8 10803 Bronx   &lt;NA&gt;                      
##  9 11202 Kings   &lt;NA&gt;                      
## 10 11224 Kings   Southern Brooklyn</code></pre>
<p>There are <strong>171 ZIP codes</strong> that appear in the ZIP code
dataset but not in the Zillow rental price dataset.</p>
<p><strong>Why these ZIP codes might be excluded:</strong></p>
<ol style="list-style-type: decimal">
<li><p><strong>Commercial or industrial areas</strong>: Some ZIP codes
like 1.0464^{4} (Southeast Bronx) may be primarily commercial or
industrial with minimal residential rental properties.</p></li>
<li><p><strong>Insufficient rental data</strong>: Zillow may exclude
areas where there isn’t enough rental market activity or data to
reliably calculate the rental index.</p></li>
<li><p><strong>Public housing or non-market rate housing</strong>: Some
neighborhoods may have predominantly public housing or rent-controlled
units that don’t reflect market rates.</p></li>
<li><p><strong>Small geographic areas</strong>: Some ZIP codes may cover
very small areas with too few rental properties to provide meaningful
statistics.</p></li>
</ol>
<h3 id="covid-19-pandemic-rental-price-changes">COVID-19 pandemic rental
price changes</h3>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a>covid_comparison <span class="ot">&lt;-</span> rental_data_combined <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a>  <span class="fu">filter</span>((year <span class="sc">==</span> <span class="dv">2020</span> <span class="sc">&amp;</span> month <span class="sc">==</span> <span class="st">&quot;January&quot;</span>) <span class="sc">|</span> (year <span class="sc">==</span> <span class="dv">2021</span> <span class="sc">&amp;</span> month <span class="sc">==</span> <span class="st">&quot;January&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a>  <span class="fu">select</span>(zip, borough, neighborhood, year, rental_price) <span class="sc">%&gt;%</span></span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb42-5"><a href="#cb42-5" tabindex="-1"></a>    <span class="at">names_from =</span> year,</span>
<span id="cb42-6"><a href="#cb42-6" tabindex="-1"></a>    <span class="at">values_from =</span> rental_price,</span>
<span id="cb42-7"><a href="#cb42-7" tabindex="-1"></a>    <span class="at">names_prefix =</span> <span class="st">&quot;price_&quot;</span></span>
<span id="cb42-8"><a href="#cb42-8" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb42-9"><a href="#cb42-9" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb42-10"><a href="#cb42-10" tabindex="-1"></a>    <span class="at">price_drop =</span> price_2020 <span class="sc">-</span> price_2021,</span>
<span id="cb42-11"><a href="#cb42-11" tabindex="-1"></a>    <span class="at">percent_change =</span> ((price_2021 <span class="sc">-</span> price_2020) <span class="sc">/</span> price_2020) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb42-12"><a href="#cb42-12" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb42-13"><a href="#cb42-13" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(price_drop)) <span class="sc">%&gt;%</span></span>
<span id="cb42-14"><a href="#cb42-14" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(price_drop)) <span class="sc">%&gt;%</span></span>
<span id="cb42-15"><a href="#cb42-15" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb42-16"><a href="#cb42-16" tabindex="-1"></a></span>
<span id="cb42-17"><a href="#cb42-17" tabindex="-1"></a>covid_comparison</span></code></pre></div>
<pre><code>## # A tibble: 10 × 7
##      zip borough  neighborhood   price_2020 price_2021 price_drop percent_change
##    &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;               &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;          &lt;dbl&gt;
##  1 10007 New York Lower Manhatt…      6334.      5422.       913.          -14.4
##  2 10069 New York &lt;NA&gt;                4623.      3875.       748.          -16.2
##  3 10009 New York Lower East Si…      3406.      2692.       714.          -21.0
##  4 10016 New York Gramercy Park…      3731.      3019.       712.          -19.1
##  5 10001 New York Chelsea and C…      4108.      3398.       710.          -17.3
##  6 10002 New York Lower East Si…      3645.      2935.       710.          -19.5
##  7 10004 New York Lower Manhatt…      3150.      2444.       706.          -22.4
##  8 10038 New York Lower Manhatt…      3573.      2876.       698.          -19.5
##  9 10012 New York Greenwich Vil…      3629.      2942.       686.          -18.9
## 10 10010 New York Gramercy Park…      3697.      3012.       685.          -18.5</code></pre>
<h3 id="analysis-of-the-largest-rental-price-drops">Analysis of the
largest rental price drops</h3>
<p>The table above shows the 10 ZIP codes with the largest drops in
rental prices from January 2020 to January 2021, during the COVID-19
pandemic.</p>
<p><strong>Key observations:</strong></p>
<ol style="list-style-type: decimal">
<li><p><strong>Geographic concentration</strong>: Many of the ZIP codes
with the largest price drops are located in Manhattan and Brooklyn,
particularly in neighborhoods that were traditionally high-rent
areas.</p></li>
<li><p><strong>Urban exodus effect</strong>: The pandemic caused many
residents to leave dense urban areas for suburbs or less expensive
neighborhoods, leading to decreased demand and falling prices in
previously expensive areas.</p></li>
<li><p><strong>Price drop magnitude</strong>: The largest drops were
substantial, with some areas seeing decreases of over $913 per
month.</p></li>
<li><p><strong>Luxury market impact</strong>: High-end neighborhoods may
have been particularly affected as remote work reduced the need to live
close to Manhattan offices, and international students/workers left the
city.</p></li>
<li><p><strong>Percentage changes</strong>: The percentage changes
(shown as <code>percent_change</code>) indicate that some areas saw
declines of 14.4% or more, representing significant market
corrections.</p></li>
</ol>
<p>This dramatic shift in rental prices reflects the unique impact of
the pandemic on urban housing markets, particularly in high-density,
high-cost areas.</p>

</body>
</html>
